{
	"info": {
		"_postman_id": "0566ca7f-470c-4f28-a76d-70b1b68aee26",
		"name": "Battery-Pass",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Provider",
			"item": [
				{
					"name": "1. Create sample data",
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {}
					},
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/octet-stream",
								"type": "default",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"electrochemicalProperties\": {\r\n        \"ratedCapacity\": 210,\r\n        \"batteryEnergy\": {\r\n            \"energyRoundtripEfficiencyChange\": 67,\r\n            \"maximumAllowedBatteryEnergy\": 90000.0,\r\n            \"energyRoundtripEfficiency\": 56\r\n        },\r\n        \"ratioMaximumAllowedBatteryPowerAndMaximumAllowedBatteryEnergy\": 0.611,\r\n        \"batteryVoltage\": {\r\n            \"nominalVoltage\": 4.3,\r\n            \"maxVoltage\": 6.0,\r\n            \"minVoltage\": 2.0\r\n        },\r\n        \"internalResistance\": {\r\n            \"cellInternalResistance\": 45,\r\n            \"packInternalResistanceIncrease\": 23,\r\n            \"packInternalResistance\": 67\r\n        },\r\n        \"capacityThresholdExhaustion\": 23,\r\n        \"batteryPower\": {\r\n            \"originalPowerCapability\": 123,\r\n            \"powerFade\": 23.0,\r\n            \"originalPowerCapabilityLimits\": 123,\r\n            \"maximumAllowedBatteryPower\": 55000.0,\r\n            \"powerCapabilityAt20Charge\": 643.0,\r\n            \"originalPower\": 7.56,\r\n            \"powerCapabilityAt80Charge\": 47.0\r\n        },\r\n        \"capacityFade\": 34\r\n    },\r\n    \"document\": {\r\n        \"responsibleSourcing\": [\r\n            {\r\n                \"title\": \"LlN\",\r\n                \"fileLocation\": \"telnet://192.0.2.16:80/\"\r\n            }\r\n        ],\r\n        \"packagingInstructions\": [\r\n            {\r\n                \"title\": \"eOMtThyhVNLWUZNRcBaQKxI\",\r\n                \"fileLocation\": \"telnet://192.0.2.16:80/\"\r\n            }\r\n        ],\r\n        \"transportationInstructions\": [\r\n            {\r\n                \"title\": \"yedUsFwdkelQbxeTeQOvaScfqIOOmaa\",\r\n                \"fileLocation\": \"ftp://ftp.is.co.za/rfc/rfc1808.txt\"\r\n            }\r\n        ],\r\n        \"vehicleDismantlingProcedure\": [\r\n            {\r\n                \"title\": \"JxkyvRnL\",\r\n                \"fileLocation\": \"http://www.ietf.org/rfc/rfc2396.txt\"\r\n            }\r\n        ],\r\n        \"testReportsResults\": [\r\n            {\r\n                \"title\": \"UMaAIKKIkknjWEXJUfPxxQHeWKEJ\",\r\n                \"fileLocation\": \"telnet://192.0.2.16:80/\"\r\n            }\r\n        ],\r\n        \"batteryDismantlingProcedure\": [\r\n            {\r\n                \"title\": \"RYtGKbgicZaHCBRQDSx\",\r\n                \"fileLocation\": \"http://www.wikipedia.org\"\r\n            }\r\n        ],\r\n        \"safetyMeasures\": [\r\n            {\r\n                \"title\": \"VLhpfQGTMDYpsBZxvfBoeygjb\",\r\n                \"fileLocation\": \"ftp://ftp.is.co.za/rfc/rfc1808.txt\"\r\n            }\r\n        ],\r\n        \"declarationOfConformity\": [\r\n            {\r\n                \"title\": \"dpHYZGhtgdntugzvvKAXLhM\",\r\n                \"fileLocation\": \"http://www.wikipedia.org\"\r\n            }\r\n        ]\r\n    },\r\n    \"datePlacedOnMarket\": \"2022-09-08T08:13:33.111Z\",\r\n    \"cellChemistry\": {\r\n        \"electrolyteComposition\": [\r\n            {\r\n                \"matierialPercentageMassFraction\": 19,\r\n                \"matierialWeight\": 2.5,\r\n                \"materialName\": \"sPB\"\r\n            }\r\n        ],\r\n        \"anodeCompositionOther\": [\r\n            {\r\n                \"matierialPercentageMassFraction\": 19,\r\n                \"matierialWeight\": 2.5,\r\n                \"materialName\": \"YdvDhtAsLghPXAgtbprXPZkhnfLTBSX\"\r\n            }\r\n        ],\r\n        \"recyclateContentActiveMaterials\": [\r\n            {\r\n                \"matierialPercentageMassFraction\": 19,\r\n                \"matierialWeight\": 2.5,\r\n                \"materialName\": \"UfzQhdgLLfDTDGspDb\"\r\n            }\r\n        ],\r\n        \"anodeActiveMaterials\": [\r\n            {\r\n                \"matierialPercentageMassFraction\": 19,\r\n                \"matierialWeight\": 2.5,\r\n                \"materialName\": \"QvBQYuxiXXVytGCxzVllpgTJKhRQq\"\r\n            }\r\n        ],\r\n        \"cathodeActiveMaterials\": [\r\n            {\r\n                \"matierialPercentageMassFraction\": 19,\r\n                \"matierialWeight\": 2.5,\r\n                \"materialName\": \"gNfZBdyFGRajVfJNonEnOinZj\"\r\n            }\r\n        ],\r\n        \"cathodeCompositionOther\": [\r\n            {\r\n                \"matierialPercentageMassFraction\": 19,\r\n                \"matierialWeight\": 2.5,\r\n                \"materialName\": \"qszYL\"\r\n            }\r\n        ]\r\n    },\r\n    \"physicalDimensions\": {\r\n        \"length\": 20000,\r\n        \"width\": 1000,\r\n        \"weight\": 1007,\r\n        \"diameter\": 3,\r\n        \"height\": 1\r\n    },\r\n    \"temperatureRangeIdleState\": {\r\n        \"temperatureRangeIdleStateUpperLimit\": 67,\r\n        \"temperatureRangeIdleStateLowerLimit\": 67\r\n    },\r\n    \"batteryCycleLife\": {\r\n        \"cycleLifeTestCRate\": 45,\r\n        \"cycleLifeTestDepthOfDischarge\": 23,\r\n        \"expectedLifetime\": 456\r\n    },\r\n    \"manufacturer\": {\r\n        \"name\": \"Samsung\",\r\n        \"contact\": {\r\n            \"faxNumber\": \"+49 89 0987654321\",\r\n            \"website\": \"https://www.samsung.com\",\r\n            \"phoneNumber\": \"+49 89 1234567890\",\r\n            \"email\": \"test.mail@example.com\"\r\n        },\r\n        \"address\": {\r\n            \"locality\": {\r\n                \"value\": \"Mannheim\",\r\n                \"technicalKey\": \"BLOCK\"\r\n            },\r\n            \"country\": {\r\n                \"shortName\": \"TB-03\"\r\n            },\r\n            \"postCode\": {\r\n                \"value\": \"68161\\\\12\",\r\n                \"technicalKey\": \"CEDEX\"\r\n            },\r\n            \"thoroughfare\": {\r\n                \"value\": \"Bernstraße\",\r\n                \"number\": \"45\",\r\n                \"technicalKey\": \"STREET\"\r\n            },\r\n            \"premise\": {\r\n                \"value\": \"Werk 1\",\r\n                \"technicalKey\": \"BUILDING\"\r\n            },\r\n            \"postalDeliveryPoint\": {\r\n                \"value\": \"Tor 1\",\r\n                \"technicalKey\": \"INTERURBAN_DELIVERY_POINT\"\r\n            }\r\n        }\r\n    },\r\n    \"warrantyPeriod\": 60,\r\n    \"composition\": {\r\n        \"compositionOfBattery\": [\r\n            {\r\n                \"matierialPercentageMassFraction\": 19,\r\n                \"matierialWeight\": 2.5,\r\n                \"materialName\": \"Oxm\"\r\n            }\r\n        ],\r\n        \"criticalRawMaterials\": \"QIn\",\r\n        \"components\": {\r\n            \"componentsPartNumber\": \"Case xxxxxxx/xx; Controller xxxxxxx/xx\",\r\n            \"componentsSupplier\": [\r\n                {\r\n                    \"address\": {\r\n                        \"locality\": {\r\n                            \"value\": \"Mannheim\",\r\n                            \"technicalKey\": \"BLOCK\"\r\n                        },\r\n                        \"country\": {\r\n                            \"shortName\": \"RY-NLV\"\r\n                        },\r\n                        \"postCode\": {\r\n                            \"value\": \"68161\\\\12\",\r\n                            \"technicalKey\": \"CEDEX\"\r\n                        },\r\n                        \"thoroughfare\": {\r\n                            \"value\": \"Bernstraße\",\r\n                            \"number\": \"45\",\r\n                            \"technicalKey\": \"STREET\"\r\n                        },\r\n                        \"premise\": {\r\n                            \"value\": \"Werk 1\",\r\n                            \"technicalKey\": \"BUILDING\"\r\n                        },\r\n                        \"postalDeliveryPoint\": {\r\n                            \"value\": \"Tor 1\",\r\n                            \"technicalKey\": \"INTERURBAN_DELIVERY_POINT\"\r\n                        }\r\n                    },\r\n                    \"contact\": {\r\n                        \"faxNumber\": \"+49 89 0987654321\",\r\n                        \"website\": \"https://www.samsung.com\",\r\n                        \"phoneNumber\": \"+49 89 1234567890\",\r\n                        \"email\": \"test.mail@example.com\"\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    \"manufacturing\": {\r\n        \"dateOfManufacturing\": \"2022-03-07\",\r\n        \"address\": {\r\n            \"locality\": {\r\n                \"value\": \"Mannheim\",\r\n                \"technicalKey\": \"BLOCK\"\r\n            },\r\n            \"country\": {\r\n                \"shortName\": \"\"\r\n            },\r\n            \"postCode\": {\r\n                \"value\": \"68161\\\\12\",\r\n                \"technicalKey\": \"CEDEX\"\r\n            },\r\n            \"thoroughfare\": {\r\n                \"value\": \"Bernstraße\",\r\n                \"number\": \"45\",\r\n                \"technicalKey\": \"STREET\"\r\n            },\r\n            \"premise\": {\r\n                \"value\": \"Werk 1\",\r\n                \"technicalKey\": \"BUILDING\"\r\n            },\r\n            \"postalDeliveryPoint\": {\r\n                \"value\": \"Tor 1\",\r\n                \"technicalKey\": \"INTERURBAN_DELIVERY_POINT\"\r\n            }\r\n        }\r\n    },\r\n    \"batteryIdentification\": {\r\n        \"batteryType\": \"LFP, Natrium, Li-Ion, NMC, NCA, Solid-State\",\r\n        \"batteryIDDMCCode\": \"X123456789012X12345678901234567\",\r\n        \"batteryModel\": \"LFP, Natrium, Li-Ion, NMC, NCA, Solid-State\"\r\n    },\r\n    \"stateOfBattery\": {\r\n        \"stateOfHealth\": 12,\r\n        \"statusBattery\": \"first life/ waste/ repaired/ repurposed/ recycled\",\r\n        \"stateOfCharge\": 23\r\n    },\r\n    \"cO2FootprintTotal\": 124.0\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverUrl}}/provider_backend/data/{{digitalTwinSubmodelId}}",
							"host": [
								"{{serverUrl}}"
							],
							"path": [
								"provider_backend",
								"data",
								"{{digitalTwinSubmodelId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "1.1 Get sample data",
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {}
					},
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							},
							{
								"key": "Accept",
								"value": "application/octet-stream",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{serverUrl}}/provider_backend/data/{{digitalTwinSubmodelId}}",
							"host": [
								"{{serverUrl}}"
							],
							"path": [
								"provider_backend",
								"data",
								"{{digitalTwinSubmodelId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Register assets",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "password",
									"type": "string"
								},
								{
									"key": "key",
									"value": "X-Api-Key",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"asset\": {\r\n        \"properties\": {\r\n            \"asset:prop:id\": \"{{assetId}}\",\r\n            \"asset:prop:description\": \"Battery Passport test data\"\r\n        }\r\n    },\r\n    \"dataAddress\": {\r\n        \"properties\": {\r\n            \"type\": \"HttpData\",\r\n            \"baseUrl\": \"{{serverUrl}}/provider_backend/data/{{digitalTwinSubmodelId}}\"\r\n        }\r\n    }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverUrl}}/provider/data/assets",
							"host": [
								"{{serverUrl}}"
							],
							"path": [
								"provider",
								"data",
								"assets"
							]
						}
					},
					"response": []
				},
				{
					"name": "2.1 Get assets",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "password",
									"type": "string"
								},
								{
									"key": "key",
									"value": "X-Api-Key",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverUrl}}/provider/data/assets",
							"host": [
								"{{serverUrl}}"
							],
							"path": [
								"provider",
								"data",
								"assets"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Register policy",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "password",
									"type": "string"
								},
								{
									"key": "key",
									"value": "X-Api-Key",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"id\": \"{{policyId}}\",\r\n    \"policy\": {\r\n        \"prohibitions\": [],\r\n        \"obligations\": [],\r\n        \"permissions\": [\r\n            {\r\n                \"edctype\": \"dataspaceconnector:permission\",\r\n                \"action\": {\r\n                    \"type\": \"USE\"\r\n                },\r\n                \"constraints\": []\r\n            }\r\n        ]\r\n    }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverUrl}}/provider/data/policydefinitions",
							"host": [
								"{{serverUrl}}"
							],
							"path": [
								"provider",
								"data",
								"policydefinitions"
							]
						}
					},
					"response": []
				},
				{
					"name": "3.1 Get policy",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "password",
									"type": "string"
								},
								{
									"key": "key",
									"value": "X-Api-Key",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverUrl}}/provider/data/policydefinitions",
							"host": [
								"{{serverUrl}}"
							],
							"path": [
								"provider",
								"data",
								"policydefinitions"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Register contract definitions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "password",
									"type": "string"
								},
								{
									"key": "key",
									"value": "X-Api-Key",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"id\": \"{{contractDefinitionId}}\",\r\n    \"criteria\": [\r\n        {\r\n            \"operandLeft\": \"asset:prop:id\",\r\n            \"operator\": \"=\",\r\n            \"operandRight\": \"{{assetId}}\"\r\n        }\r\n    ],\r\n    \"accessPolicyId\": \"{{policyId}}\",\r\n    \"contractPolicyId\": \"{{policyId}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverUrl}}/provider/data/contractdefinitions",
							"host": [
								"{{serverUrl}}"
							],
							"path": [
								"provider",
								"data",
								"contractdefinitions"
							]
						}
					},
					"response": []
				},
				{
					"name": "4.1 Get contract definitions",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "password",
									"type": "string"
								},
								{
									"key": "key",
									"value": "X-Api-Key",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "",
									"value": "",
									"type": "default",
									"disabled": true
								}
							],
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverUrl}}/provider/data/contractdefinitions",
							"host": [
								"{{serverUrl}}"
							],
							"path": [
								"provider",
								"data",
								"contractdefinitions"
							]
						}
					},
					"response": []
				},
				{
					"name": "5. Register Digital Twin to registry",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"description\": [\r\n        {\r\n            \"language\": \"en\",\r\n            \"text\": \"demo_catena_test_1.txt\"\r\n        }\r\n    ],\r\n    \"globalAssetId\": {\r\n        \"value\": [\r\n            \"{{digitalTwinId}}\"\r\n        ]\r\n    },\r\n    \"idShort\": \"demo_catena_test_1.txt\",\r\n    \"identification\": \"{{digitalTwinId}}\",\r\n    \"specificAssetIds\": [\r\n        {\r\n            \"key\": \"batteryModel\",\r\n            \"value\": \"LFP, Natrium, Li-Ion, NMC, NCA, Solid-State\"\r\n        },\r\n        {\r\n            \"key\": \"dateOfManufacturing\",\r\n            \"value\": \"2022-03-07\"\r\n        },\r\n        {\r\n            \"key\": \"AssetId\",\r\n            \"value\": \"{{digitalTwinId}}-{{digitalTwinSubmodelId}}\"\r\n        },\r\n        {\r\n            \"key\": \"batteryIDDMCCode\",\r\n            \"value\": \"X123456789012X12345678901234567\"\r\n        }\r\n    ],\r\n    \"submodelDescriptors\": [\r\n        {\r\n            \"description\": [\r\n                {\r\n                    \"language\": \"en\",\r\n                    \"text\": \"Battery Passport Submodel\"\r\n                }\r\n            ],\r\n            \"idShort\": \"MaterialPass\",\r\n            \"identification\": \"{{digitalTwinSubmodelId}}\",\r\n            \"semanticId\": {\r\n                \"value\": [\r\n                    \"urn_bamm_io.catenax.battery.battery_pass_2.0.0\"\r\n                ]\r\n            },\r\n            \"endpoints\": [\r\n                {\r\n                    \"interface\": \"SUBMODEL.SIEM.0002\",\r\n                    \"protocolInformation\": {\r\n                        \"endpointAddress\": \"https://materialpass.int.demo.catena-x.net/provider/api/v1/ids/data\",\r\n                        \"endpointProtocol\": \"IDS/ECLIPSE DATASPACE CONNECTOR\",\r\n                        \"endpointProtocolVersion\": \"0.0.1-SNAPSHOT\"\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{registryUrl}}/registry/registry/shell-descriptors",
							"host": [
								"{{registryUrl}}"
							],
							"path": [
								"registry",
								"registry",
								"shell-descriptors"
							]
						}
					},
					"response": []
				},
				{
					"name": "5.1 Get Digital Twin by Id from registry",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{registryUrl}}/registry/registry/shell-descriptors/{{digitalTwinId}}",
							"host": [
								"{{registryUrl}}"
							],
							"path": [
								"registry",
								"registry",
								"shell-descriptors",
								"{{digitalTwinId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Consumer",
			"item": [
				{
					"name": "CX Registry",
					"item": [
						{
							"name": "1. /lookup/shells - Query Digital Twin",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{registryUrl}}/registry/lookup/shells?assetIds=%5B%22%7B%5Cn%20%20%5C%22key%5C%22%3A%20%5C%22batteryIDDMCCode%5C%22%2C%5Cn%20%20%5C%22value%5C%22%3A%20%5C%22X123456789012X12345678901234567%5C%22%5Cn%7D%22%2C%22%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22key%5C%22%3A%20%5C%22AssetId%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22value%5C%22%3A%20%5C%22urn%3Auuid%3A61125dc3-5e6f-4f4b-838d-447432b97918%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%22%5D",
									"host": [
										"{{registryUrl}}"
									],
									"path": [
										"registry",
										"lookup",
										"shells"
									],
									"query": [
										{
											"key": "assetIds",
											"value": "%5B%22%7B%5Cn%20%20%5C%22key%5C%22%3A%20%5C%22batteryIDDMCCode%5C%22%2C%5Cn%20%20%5C%22value%5C%22%3A%20%5C%22X123456789012X12345678901234567%5C%22%5Cn%7D%22%2C%22%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22key%5C%22%3A%20%5C%22AssetId%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22value%5C%22%3A%20%5C%22urn%3Auuid%3A61125dc3-5e6f-4f4b-838d-447432b97918%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%22%5D"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "2. /registry/shell-descriptors/{id} - Get Digital Twin By Id",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{registryUrl}}/registry/registry/shell-descriptors/{{digitalTwinId}}",
									"host": [
										"{{registryUrl}}"
									],
									"path": [
										"registry",
										"registry",
										"shell-descriptors",
										"{{digitalTwinId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Get specific submodel descripter",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{registryUrl}}/registry/registry/shell-descriptors/{{digitalTwinId}}/submodel-descriptors/{{digitalTwinSubmodelId}}",
									"host": [
										"{{registryUrl}}"
									],
									"path": [
										"registry",
										"registry",
										"shell-descriptors",
										"{{digitalTwinId}}",
										"submodel-descriptors",
										"{{digitalTwinSubmodelId}}"
									],
									"query": [
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Data transfer",
					"item": [
						{
							"name": "1. Get contract offer catalog",
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "password",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-Api-Key",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "default"
									}
								],
								"url": {
									"raw": "{{serverUrl}}/consumer/data/catalog?providerUrl={{serverUrl}}/provider/api/v1/ids/data",
									"host": [
										"{{serverUrl}}"
									],
									"path": [
										"consumer",
										"data",
										"catalog"
									],
									"query": [
										{
											"key": "providerUrl",
											"value": "{{serverUrl}}/provider/api/v1/ids/data"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Negotiate Contract",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const jsonResponse = pm.response.json();\r",
											"pm.collectionVariables.set(\"negotiationId\", jsonResponse.id);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "password",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-Api-Key",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "default"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"connectorId\": \"foo\",\r\n    \"connectorAddress\": \"https://materialpass.int.demo.catena-x.net/provider/api/v1/ids/data\",\r\n    \"offer\": {\r\n        \"offerId\": \"{{assetId}}:foo\",\r\n        \"assetId\": \"{{assetId}}\",\r\n        \"policy\": {\r\n            \"uid\": \"{{policyId}}\",\r\n            \"prohibitions\": [],\r\n            \"obligations\": [],\r\n            \"permissions\": [\r\n                {\r\n                    \"edctype\": \"dataspaceconnector:permission\",\r\n                    \"action\": {\r\n                        \"type\": \"USE\"\r\n                    },\r\n                    \"target\": \"{{assetId}}\",\r\n                    \"constraints\": []\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{serverUrl}}/consumer/data/contractnegotiations",
									"host": [
										"{{serverUrl}}"
									],
									"path": [
										"consumer",
										"data",
										"contractnegotiations"
									]
								}
							},
							"response": []
						},
						{
							"name": "2.1 Get Negotiations",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const jsonResponse = pm.response.json();\r",
											"pm.collectionVariables.set(\"contractAgreementId\", jsonResponse.contractAgreementId);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "password",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-Api-Key",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "default"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{serverUrl}}/consumer/data/contractnegotiations/{{negotiationId}}",
									"host": [
										"{{serverUrl}}"
									],
									"path": [
										"consumer",
										"data",
										"contractnegotiations",
										"{{negotiationId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Transfer data",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const jsonResponse = pm.response.json();\r",
											"pm.collectionVariables.set(\"transferId\", jsonResponse.id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "password",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-Api-Key",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"id\": \"{{transferProcessId}}\",\r\n    \"connectorId\": \"foo\",\r\n    \"connectorAddress\": \"https://materialpass.int.demo.catena-x.net/provider/api/v1/ids/data\",\r\n    \"contractId\": \"{{contractAgreementId}}\",\r\n    \"assetId\": \"{{assetId}}\",\r\n    \"managedResources\": \"false\",\r\n    \"dataDestination\": {\r\n        \"type\": \"HttpProxy\"\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{serverUrl}}/consumer/data/transferprocess",
									"host": [
										"{{serverUrl}}"
									],
									"path": [
										"consumer",
										"data",
										"transferprocess"
									]
								}
							},
							"response": []
						},
						{
							"name": "3.1 Verify data transfer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "password",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-Api-Key",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{serverUrl}}/consumer/data/transferprocess/{{transferId}}",
									"host": [
										"{{serverUrl}}"
									],
									"path": [
										"consumer",
										"data",
										"transferprocess",
										"{{transferId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Get data from backend",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// generate unique transfer process Id for every call\r",
											"var transferProcessId = pm.collectionVariables.get(\"transferProcessId\");\r",
											"transferProcessId = parseInt(transferProcessId) + 1;\r",
											"pm.collectionVariables.set(\"transferProcessId\", transferProcessId);\r",
											"console.info(\"Transfer Process Id: \"+ pm.collectionVariables.get(\"transferProcessId\"))"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "password",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-Api-Key",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/octet-stream",
										"type": "default"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{serverUrl}}/consumer_backend/{{transferProcessId}}",
									"host": [
										"{{serverUrl}}"
									],
									"path": [
										"consumer_backend",
										"{{transferProcessId}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"auth": {
		"type": "oauth2",
		"oauth2": [
			{
				"key": "clientSecret",
				"value": "{{clientSecret}}",
				"type": "string"
			},
			{
				"key": "clientId",
				"value": "{{clientId}}",
				"type": "string"
			},
			{
				"key": "grant_type",
				"value": "client_credentials",
				"type": "string"
			},
			{
				"key": "scope",
				"value": "openid profile email",
				"type": "string"
			},
			{
				"key": "challengeAlgorithm",
				"value": "S256",
				"type": "string"
			},
			{
				"key": "authUrl",
				"value": "https://centralidp.demo.catena-x.net/auth/realms/CX-Central/protocol/openid-connect/auth",
				"type": "string"
			},
			{
				"key": "addTokenTo",
				"value": "header",
				"type": "string"
			},
			{
				"key": "client_authentication",
				"value": "header",
				"type": "string"
			},
			{
				"key": "accessTokenUrl",
				"value": "https://centralidp.demo.catena-x.net/auth/realms/CX-Central/protocol/openid-connect/token",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "digitalTwinId",
			"value": "urn:uuid:365e6fbe-bb34-11ec-8422-0242ac120002",
			"type": "default"
		},
		{
			"key": "digitalTwinSubmodelId",
			"value": "urn:uuid:61125dc3-5e6f-4f4b-838d-447432b97918",
			"type": "default"
		},
		{
			"key": "edcPolicyId",
			"value": "231802-bb34-11ec-8422-0242ac120002",
			"type": "default"
		},
		{
			"key": "providerBpn",
			"value": "some-bpn",
			"type": "default"
		},
		{
			"key": "registryUrl",
			"value": "https://semantics.int.demo.catena-x.net",
			"type": "default"
		},
		{
			"key": "clientId",
			"value": "",
			"type": "default"
		},
		{
			"key": "clientSecret",
			"value": "",
			"type": "default"
		},
		{
			"key": "serverUrl",
			"value": "https://materialpass.int.demo.catena-x.net",
			"type": "default"
		},
		{
			"key": "negotiationId",
			"value": "1",
			"type": "default"
		},
		{
			"key": "transferId",
			"value": "1",
			"type": "default"
		},
		{
			"key": "contractAgreementId",
			"value": "1",
			"type": "default"
		},
		{
			"key": "transferProcessId",
			"value": "1",
			"type": "default"
		},
		{
			"key": "assetId",
			"value": "1",
			"type": "default"
		},
		{
			"key": "policyId",
			"value": "1",
			"type": "default"
		},
		{
			"key": "contractDefinitionId",
			"value": "1",
			"type": "default"
		},
		{
			"value": "",
			"disabled": true
		}
	]
}